# fixed copy from https://github.com/thales-markets/thales-subgraph/blob/master/subgraphs/thales-binary-options.graphql

scalar Bytes
scalar BigInt

type Market {
  id: ID!
  timestamp: BigInt!
  creator: Bytes!
  currencyKey: Bytes!
  strikePrice: BigInt!
  maturityDate: BigInt!
  expiryDate: BigInt!
  isOpen: Boolean!
  poolSize: BigInt!
  longAddress: Bytes!
  shortAddress: Bytes!
  result: Int
  customMarket: Boolean!
  customOracle: Bytes!
  finalPrice: BigInt
}

type RangedMarket {
  id: ID!
  timestamp: BigInt!
  currencyKey: Bytes!
  maturityDate: BigInt!
  leftPrice: BigInt!
  rightPrice: BigInt!
  inAddress: Bytes!
  outAddress: Bytes!
  rightMarket: Market!
  leftMarket: Market!
  isOpen: Boolean!
  result: Int
  finalPrice: BigInt
}

enum OptionTransactionType {
  mint
  exercise
}

type OptionTransaction {
  id: ID!
  timestamp: BigInt!
  blockNumber: BigInt!
  type: OptionTransactionType!
  account: Bytes!
  market: Bytes!
  amount: BigInt!
  currencyKey: Bytes
  side: Int
  fee: BigInt
}

enum OptionSide {
  long
  short
  in
  out
}

enum OrderSide {
  buy
  sell
}

type Trade {
  # tx hash - order hash - log index
  id: ID!
  transactionHash: Bytes!
  timestamp: BigInt!
  blockNumber: BigInt!
  orderHash: Bytes!
  maker: Bytes!
  taker: Bytes!
  makerToken: Bytes!
  takerToken: Bytes!
  makerAmount: BigInt!
  takerAmount: BigInt!
  market: Bytes
  optionSide: OptionSide
  orderSide: OrderSide
}

enum TokenTransactionType {
  claimRetroAirdrop
  claimRetroUnlocked
  claimStakingRewards
  stake
  startUnstake
  cancelUnstake
  unstake
  addToEscrow
  vest
  claimMigratedRewards
  lpStake
  lpUnstake
  lpClaimStakingRewards
  claimMigratedRetroRewards
}

type TokenTransaction {
  # tx hash - log index
  id: ID!
  transactionHash: Bytes!
  timestamp: BigInt!
  account: Bytes!
  amount: BigInt
  type: TokenTransactionType!
  blockNumber: BigInt!
}

type OngoingAirdropNewRoot {
  # tx hash - log index
  id: ID!
  transactionHash: Bytes!
  root: Bytes!
  timestamp: BigInt!
  period: BigInt!
}

type BinaryOption {
  id: ID!
  timestamp: BigInt!
  market: Bytes!
  side: OptionSide
}

type Staker {
  id: ID!
  account: Bytes!
  timestamp: BigInt!
  stakedAmount: BigInt!
  escrowedAmount: BigInt!
  totalStakedAmount: BigInt!
  unstakingAmount: BigInt!
}

type ThalesRoyaleGame {
  id: ID!
  timestamp: BigInt!
  address: Bytes!
  season: BigInt!
}

type ThalesRoyaleSeason {
  id: ID!
  timestamp: BigInt!
  season: BigInt!
}

type ThalesRoyaleRound {
  id: ID!
  timestamp: BigInt!
  round: BigInt!
  season: BigInt!
  totalPlayersPerRoundPerSeason: BigInt!
  eliminatedPerRoundPerSeason: BigInt!
  result: BigInt
  strikePrice: BigInt
  finalPrice: BigInt
}

type ThalesRoyalePlayer {
  id: ID!
  number: BigInt!
  address: Bytes!
  timestamp: BigInt!
  season: BigInt!
  isAlive: Boolean!
  deathRound: BigInt
  defaultPosition: BigInt
}

type ThalesRoyalePosition {
  id: ID!
  timestamp: BigInt!
  player: Bytes!
  round: BigInt!
  season: BigInt!
  position: BigInt!
}

type ThalesRoyalePass {
  id: ID!
  address: Bytes!
}

type ThalesRoyalePassportPlayer {
  id: ID!
  owner: Bytes!
  number: BigInt
  timestamp: BigInt
  season: BigInt
  isAlive: Boolean
  deathRound: BigInt
  defaultPositions: [BigInt!]
}

type ThalesRoyalePassportPosition {
  id: ID!
  timestamp: BigInt!
  tokenPlayer: BigInt!
  round: BigInt!
  season: BigInt!
  position: BigInt!
}

type Position {
  id: ID!
  market: Market!
  side: OptionSide!
}

type PositionBalance {
  id: ID!
  account: Bytes!
  amount: BigInt!
  position: Position!
}

type Query {
  markets(first: Int): [Market]
  rangedMarkets(first: Int): [RangedMarket]
}
